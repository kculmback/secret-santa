function shuffle(t){for(var e,n,s=t.length;0!==s;)n=Math.floor(Math.random()*s),s-=1,e=t[s],t[s]=t[n],t[n]=e;return t}function handleFormSubmit(t){t.preventDefault();var e={};$(form).find("input").each(function(){"name"===this.name.slice(0,4)&&(e[this.value]=[$(this).val(),$(this).next().val()])});var n=Object.keys(e).length,s=[];for(x in e)s.push(x);s=shuffle(s);for(var i=0;i<s.length;i++)i===s.length-1?e[s[i]].push(e[s[0]][0]):e[s[i]].push(e[s[i+1]][0]);$(form).find(".submitBtn").text("Pairing...");var a=[],r=0;for(y in e)if(emailjs.send("default_service","secret_santa",{santa:e[y][0],email:e[y][1],giftie:e[y][2]}).then(function(){},function(t){alert("Send email failed!\r\n Response:\n "+JSON.stringify(t))}),a.push(" "+e[y][0]),r++,r===n){var o=document.getElementsByClassName("results")[0],l=document.getElementsByClassName("results__display")[0];o.style.display="block",l.textContent=a,$(form).find(".submitBtn").text("Pair up!")}}var template=$("#sections .section:first").clone(),sectionsCount=0;$("body").on("click",".addsection",function(){sectionsCount++;template.clone().find(":input").each(function(){var t=this.id.slice(0,4)+sectionsCount;$(this).prev().attr("for",t),this.id=t,$(this).attr("name",t)}).end().appendTo("#sections");return!1}),$("#sections").on("click",".remove",function(){return $(this).parent().fadeOut(300,function(){return $(this).parent().parent().empty(),!1}),!1});var form=document.getElementsByClassName("secretSantaForm")[0];form.addEventListener("submit",handleFormSubmit);