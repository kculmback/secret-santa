function secretSantaFormSubmit(t){t.preventDefault(),$(submitBtn).text("Pairing..."),$(secretSantaForm).find(".results").css("display","block");var e=[];$(secretSantaForm).find(".section").each(function(){var t={name:$(this).find(".nameInput").val(),email:$(this).find(".emailInput").val()};e.push(t)}),e=shuffle(e),e.forEach(matchParticipants),e.forEach(emailParticipants)}function shuffle(t){for(var e,n,a=t.length;0!==a;)n=Math.floor(Math.random()*a),a-=1,e=t[a],t[a]=t[n],t[n]=e;return t}function matchParticipants(t,e,n){return t.recipient=(n[e+1]||n[0]).name}function emailParticipants(t,e,n){emailjs.send("default_service","secret_santa",{santa:t.name,email:t.email,giftie:t.recipient}).then(function(a){console.log(t.name+": SUCCESS",a),$(resultsDisplay).append("<p>Successfully sent to: "+t.name+"</p>"),e===n.length-1&&$(submitBtn).text("Pair up!")},function(a){$(resultsDisplay).append("<p>Uh oh! Unable to send email to: "+t.name+"<br>Error: "+JSON.stringify(a)+"</p>"),console.log("FAILED",a),e===n.length-1&&$(submitBtn).text("Pair up!")})}!function(){emailjs.init("user_2obYjk56U6mYcvWjM4ItJ")}();var template=$("#sections .section:first").clone(),sectionsCount=0;$("body").on("click",".addsection",function(){sectionsCount++;template.clone().find(":input").each(function(){var t=this.id.slice(0,-1)+sectionsCount;this.id=t,$(this).attr("name",t)}).end().appendTo("#sections");return!1}),$("#sections").on("click",".remove",function(){return $(this).parent().parent().fadeOut(300,function(){return $(this).parent().empty(),!1}),!1}),console.log(test);var secretSantaForm=document.getElementsByClassName("secretSantaForm")[0],resultsDisplay=document.getElementsByClassName("results-display")[0],submitBtn=document.getElementsByClassName("submitBtn")[0];secretSantaForm.addEventListener("submit",secretSantaFormSubmit);