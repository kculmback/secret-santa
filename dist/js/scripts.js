function isValidElement(t){return t.name&&t.value}function handleFormSubmit(t){function e(t){for(var e,n,i=t.length;0!==i;)n=Math.floor(Math.random()*i),i-=1,e=t[i],t[i]=t[n],t[n]=e;return t}t.preventDefault();var n={};$(form).find("input").each(function(){"name"===this.name.slice(0,4)&&(n[this.value]=[$(this).val(),$(this).next().val()])});var i=Object.keys(n).length;console.log(i);var s=[];for(x in n)s.push(x);s=e(s);for(var a=0;a<s.length;a++)a===s.length-1?n[s[a]].push(n[s[0]][0]):n[s[a]].push(n[s[a+1]][0]);$(form).find(".submitBtn").text("Pairing...");var o=[],r=0;for(y in n)if(emailjs.send("default_service","secret_santa",{santa:n[y][0],email:n[y][1],giftie:n[y][2]}).then(function(){$(form).find(".submitBtn").text("Pair up!")},function(t){alert("Send email failed!\r\n Response:\n "+JSON.stringify(t)),$(form).find(".submitBtn").text("Pair up!")}),o.push(" "+n[y][0]),r++,r===i){var l=document.getElementsByClassName("results")[0],u=document.getElementsByClassName("results__display")[0];l.style.display="block",u.textContent=o,console.log(o)}}var template=$("#sections .section:first").clone(),sectionsCount=0;$("body").on("click",".addsection",function(){sectionsCount++;template.clone().find(":input").each(function(){var t=this.id.slice(0,4)+sectionsCount;$(this).prev().attr("for",t),this.id=t,$(this).attr("name",t)}).end().appendTo("#sections");return!1}),$("#sections").on("click",".remove",function(){return $(this).parent().fadeOut(300,function(){return $(this).parent().parent().empty(),!1}),!1});var form=document.getElementsByClassName("secretSantaForm")[0];form.addEventListener("submit",handleFormSubmit);