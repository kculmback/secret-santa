function shuffle(t){for(var e,n,i=t.length;0!==i;)n=Math.floor(Math.random()*i),i-=1,e=t[i],t[i]=t[n],t[n]=e;return t}function handleFormSubmit(t){t.preventDefault();var e={};$(secretSantaForm).find("input").each(function(){"name"===this.name.slice(0,4)&&(e[this.value]=[$(this).val(),$(this).next().val()])});var n=Object.keys(e).length,i=[];for(x in e)i.push(x);i=shuffle(i);for(var s=0;s<i.length;s++)s===i.length-1?e[i[s]].push(e[i[0]][0]):e[i[s]].push(e[i[s+1]][0]);$(secretSantaForm).find(".submitBtn").text("Pairing...");var a=[],r=0;for(y in e)emailjs.send("default_service","secret_santa",{santa:e[y][0],email:e[y][1],giftie:e[y][2]}).then(function(){},function(t){alert("Send email failed!\r\n Response:\n "+JSON.stringify(t))}),a.push(" "+e[y][0]),r++,r===n&&($(secretSantaForm).find(".results").css("display","block"),$(secretSantaForm).find(".results__display").text(a),$(secretSantaForm).find(".submitBtn").text("Pair up!"))}var _0x3b05=["user_2obYjk56U6mYcvWjM4ItJ","init"];!function(){emailjs[_0x3b05[1]](_0x3b05[0])}();var template=$("#sections .section:first").clone(),sectionsCount=0;$("body").on("click",".addsection",function(){sectionsCount++;template.clone().find(":input").each(function(){var t=this.id.slice(0,4)+sectionsCount;this.id=t,$(this).attr("name",t)}).end().appendTo("#sections");return!1}),$("#sections").on("click",".remove",function(){return $(this).parent().parent().fadeOut(300,function(){return $(this).parent().empty(),!1}),!1});var secretSantaForm=document.getElementsByClassName("secretSantaForm")[0];secretSantaForm.addEventListener("submit",handleFormSubmit);