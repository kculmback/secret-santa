function shuffle(t){for(var n,e,i=t.length;0!==i;)e=Math.floor(Math.random()*i),i-=1,n=t[i],t[i]=t[e],t[e]=n;return t}function handleFormSubmit(t){t.preventDefault();var n={};$(form).find("input").each(function(){"name"===this.name.slice(0,4)&&(n[this.value]=[$(this).val(),$(this).next().val()])});var e=Object.keys(n).length,i=[];for(x in n)i.push(x);i=shuffle(i);for(var s=0;s<i.length;s++)s===i.length-1?n[i[s]].push(n[i[0]][0]):n[i[s]].push(n[i[s+1]][0]);$(form).find(".submitBtn").text("Pairing...");var a=[],r=0;for(y in n)emailjs.send("default_service","secret_santa",{santa:n[y][0],email:n[y][1],giftie:n[y][2]}).then(function(){},function(t){alert("Send email failed!\r\n Response:\n "+JSON.stringify(t))}),a.push(" "+n[y][0]),r++,r===e&&($(form).find(".results").css("display","block"),$(form).find(".results__display").text(a),$(form).find(".submitBtn").text("Pair up!"))}var _0x3b05=["user_2obYjk56U6mYcvWjM4ItJ","init"];!function(){emailjs[_0x3b05[1]](_0x3b05[0])}();var template=$("#sections .section:first").clone(),sectionsCount=0;$("body").on("click",".addsection",function(){sectionsCount++;template.clone().find(":input").each(function(){var t=this.id.slice(0,4)+sectionsCount;this.id=t,$(this).attr("name",t)}).end().appendTo("#sections");return!1}),$("#sections").on("click",".remove",function(){return $(this).parent().parent().fadeOut(300,function(){return $(this).parent().empty(),!1}),!1});var form=document.getElementsByClassName("secretSantaForm")[0];form.addEventListener("submit",handleFormSubmit);